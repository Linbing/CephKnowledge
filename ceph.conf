[global]
    fsid = 1830ad3d-83d6-4da1-9776-b12d4c2f0f44

    mon_initial_members = bjqn-ctl01,bjqn-ctl02,bjqn-ctl03
    mon_host = 172.16.13.1,172.16.13.2,172.16.13.3

    public_network = 172.16.13.0/24 # public network
    cluster_network = 172.16.13.0/24 # cluster network

    auth_cluster_required = none
    auth_service_required = none
    auth_client_required = none

    osd_pool_default_size = 3 # replica copies
    osd_pool_default_min_size = 1
    osd_pool_default_pg_num = 200
    osd_pool_default_pgp_num = 200

    ms_bind_port_min = 6800
    ms_bind_port_max = 7500
    ms_bind_ipv6 = false # do not use ipv6
    ms_nocrc = true
#    ms_crc_header = false
#    ms_crc_data = false
    throttler_perf_counter = false

    ms_dispatch_throttle_bytes = 2147483648 # 2GB
    max_open_files = 800000

[mon]
    mon_osd_cache_size = 4800 # the size of osdmaps cache

    mon_data_avail_crit = 5
    mon_data_avail_warn = 20

    mon_osd_full_ratio = 0.95
    mon_osd_nearfull_ratio = 0.70

    mon_force_quorum_join = true
    mon_osd_auto_mark_auto_out_in = false
    mon_osd_down_out_interval = 54000 # 15 hours
    mon_osd_report_timeout = 60 # default is 900

[osd]
    osd_crush_update_on_start = false
    osd_enable_op_tracker = false
    osd_journal_size = 20000 # in megabytes
    osd_mkfs_type = xfs
    osd_mkfs_options_xfs = -f -d agcount=8 -i size=2048
    osd_mount_options_xfs = "rw,nodev,noatime,nobarrier,noexec,inode64,logbsize=256k,delaylog,allocsize=4M"

    osd_failsafe_full_ratio = 0.97
    osd_failsafe_nearfull_ratio = 0.80

    osd_op_threads = 4
    osd_disk_threads = 2
    osd_op_num_shards = 8
    osd_op_num_threads_per_shard = 2
    osd_max_write_size = 512
    osd_map_cache_size = 1280 # number of OSD maps to keep cached
    osd_map_max_advance = 512
    osd_map_cache_bl_size = 512 # map stored in-memory in megabytes
    osd_map_cache_bl_inc_size = 128
    osd_pg_object_context_cache_count = 245760

    osd_client_op_priority = 62
    osd_client_message_size_cap = 2147483648 # 2GB
    osd_client_message_cap = 600
    objecter_inflight_op_bytes = 536870912 # 512MB
    objecter_inflight_ops = 7680

    filestore_fiemap = true
    filestore_xattr_use_omap = true
    filestore_omap_header_cache_size = 245760
    filestore_fd_cache_size = 245760
    filestore_fd_cache_shards = 5120

    filestore_op_threads = 8
    filestore_journal_writeahead = true
    filestore_wbthrottle_enable = false
    filestore_commit_timeout = 28800 # 8 hours
    filestore_min_sync_interval = 10
    filestore_max_sync_interval = 20
    filestore_queue_max_ops = 50000
    filestore_queue_max_bytes = 4294967296 # 4GB

    journal_aio = true
    journal_force_aio = true
    journal_max_write_bytes = 2147483648 # 2GB
    journal_max_write_entries = 40000
    journal_queue_max_ops = 80000
    journal_queue_max_bytes = 12884901888 # 12GB

    osd_recovery_op_priority = 4 # recovery operation's priority
    osd_recovery_max_active = 6
    osd_recovery_max_single_start = 2
    osd_recovery_max_chunk = 8388608 # 8MB default

    osd_max_backfills = 2
    osd_backfill_scan_min = 32 # default is 64
    osd_backfill_scan_max = 128 # default is 512
    osd_backfill_full_ratio = 0.90
    osd_backfill_retry_interval = 20

    osd_max_scrubs = 2
    osd_scrub_begin_hour = 5
    osd_scrub_end_hour = 9
    osd_scrub_load_threshold = 0.65
    osd_scrub_sleep = 2
    osd_deep_scrub_stride = 2097152 # 2MB default is 512KB
    osd_deep_scrub_update_digest_min_age = 18000 # at least 5 hours old before whole-object scrub

    osd_heartbeat_interval = 7
    osd_heartbeat_grace = 10 # default is 20
    osd_heartbeat_min_peers = 8 # default is 10
    osd_mon_heartbeat_interval = 25
    osd_mon_report_interval_min = 5
    osd_mon_report_interval_max = 40 # default is 120
    osd_mon_ack_timeout = 20

[client]
    rbd_op_threads = 2
    rbd_concurrent_management_ops = 32

#    rbd_cache = true
#    rbd_cache_writethrough_until_flush = true
#    rbd_cache_size = 201326592 # 192MB
#    rbd_cache_max_dirty = 134217728 # 128MB
#    rbd_cache_target_dirty = 33554432 # 32MB
#    rbd_cache_max_dirty_age = 2.0

    rbd_readahead_trigger_requests = 10
    rbd_readahead_max_bytes = 524288 # 512KB
    rbd_readahead_disable_after_bytes = 50331648 # 48MB

    rbd_default_format = 2
    rbd_default_order = 24
    rbd_default_stripe_count = 12
    rbd_default_stripe_unit = 524288 # 512KB
    rbd_default_features = 3 # layering + stripingv2

